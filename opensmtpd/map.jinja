{% import_yaml "opensmtpd/defaults.yaml" as default_settings %}

{% load_yaml as rawmap %}
FreeBSD:
    configdir: /usr/local/etc/mail
    pkg: opensmtpd
    service: smtpd
Debian:
    configdir: /etc
    pkg: opensmtpd
    service: opensmtpd
RedHat:
    configdir: /etc/opensmtpd
    pkg: opensmtpd
    service: opensmtpd
Arch:
    configdir: /etc/smtpd
    pkg: opensmtpd
    service: smtpd
{% endload %}
{% set defaults = salt['grains.filter_by'](rawmap, grain='os_family',
        merge=default_settings) %}

{% set opensmtpd = salt['grains.filter_by'](defaults, grain='os_family',
        merge=salt['pillar.get']('opensmtpd:lookup')) %}
